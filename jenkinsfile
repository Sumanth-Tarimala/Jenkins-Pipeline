pipeline {
    agent any 
    stages {
        stage('Checkout') { 
            steps {
                checkout([$class: 'GitSCM', branches: [[name: '*/main']], extensions: [], userRemoteConfigs: [[credentialsId: 'Jenkins', url: 'https://github.com/Sumanth-Tarimala/Jenkins-Pipeline.git']]])
		echo 'Code Checkout Completed'
            }
        }
        stage('Build') { 
            steps {
                 sh '''
		    whoami
                    cd /var/jenkins_home/workspace/terraform-pipeline-scm/Terraform-Sentinel-Policies/enforce-secure-reboot/
		    terraform plan
		    cd ../Restrict-MachineType
		    sentinel test
                 '''
            }
        }
        stage('Deploy') { 
            steps {
                echo ("Deploy Stages") 
            }
        }
    }
}
